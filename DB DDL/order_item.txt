
CREATE TABLE order_item (
    order_item_id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,

    order_id      BIGINT UNSIGNED NOT NULL,
    product_id    BIGINT UNSIGNED NOT NULL,
    option_id     BIGINT UNSIGNED NULL,

    product_name  VARCHAR(255) NOT NULL,
    unit_price    INT NOT NULL,
    quantity      INT NOT NULL,
    total_price   INT NOT NULL,

    color         VARCHAR(50) NOT NULL,
    size          VARCHAR(50) NOT NULL,

    refund_status VARCHAR(20) NOT NULL DEFAULT 'NONE',

    created_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT fk_order_item_order
        FOREIGN KEY (order_id)
        REFERENCES orders(order_id)
        ON DELETE RESTRICT,

    CONSTRAINT fk_order_item_product
        FOREIGN KEY (product_id)
        REFERENCES product(product_id)
        ON DELETE RESTRICT,

    CONSTRAINT fk_order_item_option
        FOREIGN KEY (option_id)
        REFERENCES product_option(option_id)
        ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
