환불 전략

흐름
1. 고객 결제 성공
2. PG는 결제 완료 상태
3. 우리 서버로 웹훅 전송
4. 우리 서버 처리 중 오류 발생

에러 케이스

1. 서버 일시 오류(500)
db연결실패, 트랜잭션 충돌, 서버 다운 등등
이경우에 PG는 재시도함, 나중에 정상처리 될 가능성있음
따라서 환불 절대 X

2. 비즈니스로직 오류
주문 없음, 금액 불일치, 재고없음 등등
결제는 됐는데, 서버가 주문완료를 못한 케이스
전략A 자동환불
전략B 관리자 모니터링 후 처리
