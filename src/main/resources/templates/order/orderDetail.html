<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주문 페이지</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.portone.io/v2/browser-sdk.js"></script>
</head>
<body th:data-store-id="${storeId}"
      th:data-kakao-key="${kakaoChannelKey}">
<div th:replace="~{module/header :: header}"></div>
<main class="container my-5">

  <h2 class="mb-4 fw-bold">주문서 작성</h2>

  <!-- ✅ 상품 정보 -->
  <section class="mb-5 border p-3 rounded">
    <h4 class="mb-3">상품 정보</h4>
    <div class="d-flex align-items-center">
      <img th:src="@{/product/{path}(path=${product.thumbnailUrl})}" alt="상품 이미지"
           class="me-3 border" style="width: 120px; height: 120px; object-fit: cover;">
      <div>
        <p class="fw-semibold mb-1" id="productName" th:data-productname="${product.productName}" th:text="${product.productName}"></p>
        <p class="mb-1">수량: <span th:text="${quantity}">1</span>개</p>
        <p class="text-danger fw-bold fs-5" id="displayPrice" th:data-price="${product.displayPrice}" th:text="${#numbers.formatInteger(product.displayPrice, 3, 'COMMA')} + '원'"></p>
      </div>
	  <select id="optionColor">
	    <option value="BLACK">블랙</option>
	    <option value="WHITE">화이트</option>
	  </select>

	  <select id="optionSize">
	    <option value="M">M</option>
	    <option value="L">L</option>
	  </select>

    </div>
  </section>

  <!-- ✅ 배송지 입력 -->
  <section class="mb-5 border p-3 rounded">
    <h4 class="mb-3">배송 정보</h4>
	<form id="orderForm">
	  <input type="hidden" id="productId" name="productId" th:value="${product.productId}">
	  <input type="hidden" name="optionId" th:value="${product.optionId}">
	  <input type="hidden" id="quantity" name="quantity" th:value="${quantity}">

	  <div class="mb-3">
	    <label class="form-label">받는 분 이름</label>
	    <input type="text" id="receiver" name="receiver" class="form-control" required>
	  </div>

	  <div class="mb-3">
	    <label class="form-label">연락처</label>
	    <input type="text" id="phone" name="phone" class="form-control" required placeholder="010-1234-5678">
	  </div>

	  <div class="mb-3">
	    <label class="form-label">주소</label>
	    <input type="text" id="address" name="address" class="form-control" required>
	  </div>

	  <div class="mb-3">
	    <label class="form-label">배송 요청사항</label>
	    <input type="text" id="memo" name="memo" class="form-control">
	  </div>

	  <div class="d-flex justify-content-between align-items-center mt-4 p-3 border rounded bg-light">
	    <span class="fw-semibold fs-5">총 결제 금액</span>
	    <span class="fw-bold fs-4 text-danger" id="totalPrice" th:data-total-price="${product.totalPrice}" th:text="${#numbers.formatInteger(product.totalPrice, 3, 'COMMA')} + '원'"></span>
	  </div>
	  
	  <div class="text-end mt-4">
	    <button type="button" id="payBtn" class="btn btn-danger btn-lg">
	      결제하기
	    </button>
	  </div>
	</form>
  </section>

</main>
<script src="/js/order/payment_handler.js"></script>
</body>
</html>
